<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.9.1">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2021-05-15T18:26:30+02:00</updated><id>http://localhost:4000/feed.xml</id><title type="html">safs</title><subtitle>Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.</subtitle><entry><title type="html">Welcome to Jekyll!</title><link href="http://localhost:4000/jekyll/update/2021/05/15/welcome-to-jekyll.html" rel="alternate" type="text/html" title="Welcome to Jekyll!" /><published>2021-05-15T17:14:38+02:00</published><updated>2021-05-15T17:14:38+02:00</updated><id>http://localhost:4000/jekyll/update/2021/05/15/welcome-to-jekyll</id><content type="html" xml:base="http://localhost:4000/jekyll/update/2021/05/15/welcome-to-jekyll.html">&lt;p&gt;You’ll find this post in your &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_posts&lt;/code&gt; directory. Go ahead and edit it and re-build the site to see your changes. You can rebuild the site in many different ways, but the most common way is to run &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jekyll serve&lt;/code&gt;, which launches a web server and auto-regenerates your site when a file is updated.&lt;/p&gt;

&lt;p&gt;Jekyll requires blog post files to be named according to the following format:&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;YEAR-MONTH-DAY-title.MARKUP&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Where &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;YEAR&lt;/code&gt; is a four-digit number, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;MONTH&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;DAY&lt;/code&gt; are both two-digit numbers, and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;MARKUP&lt;/code&gt; is the file extension representing the format used in the file. After that, include the necessary front matter. Take a look at the source for this post to get an idea about how it works.&lt;/p&gt;

&lt;p&gt;Jekyll also offers powerful support for code snippets:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;print_hi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Hi, &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;print_hi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'Tom'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#=&amp;gt; prints 'Hi, Tom' to STDOUT.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Check out the &lt;a href=&quot;https://jekyllrb.com/docs/home&quot;&gt;Jekyll docs&lt;/a&gt; for more info on how to get the most out of Jekyll. File all bugs/feature requests at &lt;a href=&quot;https://github.com/jekyll/jekyll&quot;&gt;Jekyll’s GitHub repo&lt;/a&gt;. If you have questions, you can ask them on &lt;a href=&quot;https://talk.jekyllrb.com/&quot;&gt;Jekyll Talk&lt;/a&gt;.&lt;/p&gt;</content><author><name></name></author><category term="jekyll" /><category term="update" /><summary type="html">You’ll find this post in your _posts directory. Go ahead and edit it and re-build the site to see your changes. You can rebuild the site in many different ways, but the most common way is to run jekyll serve, which launches a web server and auto-regenerates your site when a file is updated.</summary></entry><entry><title type="html">Facebook leak #1</title><link href="http://localhost:4000/facebook%20leak/2021/04/14/facebook-leak-1.html" rel="alternate" type="text/html" title="Facebook leak #1" /><published>2021-04-14T00:00:00+02:00</published><updated>2021-04-14T00:00:00+02:00</updated><id>http://localhost:4000/facebook%20leak/2021/04/14/facebook-leak-1</id><content type="html" xml:base="http://localhost:4000/facebook%20leak/2021/04/14/facebook-leak-1.html">&lt;p&gt;Hace unos días se filtraron leaks de la base de datos de facebook. Esa información es pública y cualquiera puede descargarla. 
La información está dividida en países y en total son unos 14GB de datos comprimidos en .zip. Calculo que más o menos llegará a los 20GB de información en RAW. 
Estoy creando una web para que la gente pueda saber si su información esta comprometida y ver los datos concretos. 
De momento lo estoy haciendo con la base de datos de España, unos 450MB en .txt haciendo un total de unas 10.000.000 de cuentas comprometidas.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/screenshots/14_04_2021_1.png&quot; alt=&quot;imagen&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Entre los datos que nos encontramos están el Nº de teléfono, ID Facebook, nombre y apellidos, localización, descripción, cuentas de correo, sexo y un etc más. Los campos estas separados por dos puntos “:” lo que hace muy fácil de entender. Por alguna razón deben de haber datos que faltan y algunos campos están separados por varios puntos dobles. Necesitamos limpiar el archivo antes de colocarlo en nuestra base de datos SQL. En mi caso estoy programándolo en MYSQL.
Para limpiarlo se me ocurrió una forma limpia de hacerlo y se trata de convertir cada “::” en “:”. Si le pasamos ese filtro varias veces obtendremos siempre como módulo un “:”. Easy.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;sed&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'s/::/:/g'&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;archivo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;txt&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Podemos hacerlo con un script que lo haga iteradamente.
Siguiente reto esta en el fitting de las variables dentro de la base de datos. En mi caso y únicamente de prueba lo hice a lo bruto: Todo varchar con longitud de hasta 300 caracteres. ¿Podría convertir los Nº de tlf y el ID a int? Si, pero hacer fitting a tanta información es sinonimo de que cada 20.000 lineas te de un error.&lt;/p&gt;

&lt;h3 id=&quot;private-env&quot;&gt;Private env&lt;/h3&gt;
&lt;p&gt;La base de datos la tenia configurada, pero se ejecutaba en modo seguro reestrigiendome importar los datos. Después de indagar, solamete habia que neutralizar la variables poniendo private_env=” “ detro de mysql.init, debajo de mysqld. Con eso, copias el archivo a /var/lib/mysql-files/ y solucionado.&lt;/p&gt;

&lt;h3 id=&quot;conexion-closed&quot;&gt;Conexion closed.&lt;/h3&gt;
&lt;p&gt;Mysql tarda en importar tanta información. Tanto que por seguridad mysql cierra la conexión si queda mucho tiempo en iddle para que no se corrompa nada. Seguramete puedes modificar estos parametros y meterlos a lo bruto. Mi solución fue dividir en archivo en archivos de 1.000.000 de lineas cada uno. Para ello tenemos el comando:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;nb&quot;&gt;split&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;l&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1000000&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;archivo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;txt&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Por defecto split nos divide el archivo tomando el binario en si. Con -l toma como referencia el final de la linea, con lo que no se corrompe.&lt;/p&gt;</content><author><name></name></author><category term="Facebook leak" /><category term="Facebook leak" /><summary type="html">Hace unos días se filtraron leaks de la base de datos de facebook. Esa información es pública y cualquiera puede descargarla. La información está dividida en países y en total son unos 14GB de datos comprimidos en .zip. Calculo que más o menos llegará a los 20GB de información en RAW. Estoy creando una web para que la gente pueda saber si su información esta comprometida y ver los datos concretos. De momento lo estoy haciendo con la base de datos de España, unos 450MB en .txt haciendo un total de unas 10.000.000 de cuentas comprometidas.</summary></entry><entry><title type="html">ssh, mysql, nginx</title><link href="http://localhost:4000/servidores/2021/03/29/ssh-mysql-nginx.html" rel="alternate" type="text/html" title="ssh, mysql, nginx" /><published>2021-03-29T00:00:00+02:00</published><updated>2021-03-29T00:00:00+02:00</updated><id>http://localhost:4000/servidores/2021/03/29/ssh-mysql-nginx</id><content type="html" xml:base="http://localhost:4000/servidores/2021/03/29/ssh-mysql-nginx.html">&lt;p&gt;Escribiré un poco de todo por que no tengo ganas de mirar lxc.
Estos días estuve probando a hostear mi propio servidor para writefreely y no tener que pagar la suscripción. Estuve haciendo pruebas en una maquina virtual en Azure y creo que sería interesante escribir sobre como voy en ello.&lt;/p&gt;

&lt;p&gt;La creación de la maquina es francamente sencilla. Lo hice con la interfaz que te dan ellos en Azure Portal. Por la linea de comandos propia de Azure no me puse a investigar. Al crear una nueva cuenta te dan 170$ para gastar en un mes, lo suficiente para hacer pruebas y jugar con servidores remotos.&lt;/p&gt;

&lt;h2 id=&quot;conexiones-ssh&quot;&gt;Conexiones ssh&lt;/h2&gt;
&lt;p&gt;Una vez creas la maquina importante abrirle los puertos para http y https. Se hace en una ventana que pone &lt;strong&gt;networking&lt;/strong&gt;, easy. Nos descargamos un archivo *.pem. Super importante, con el haremos la conexión:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-mysql&quot; data-lang=&quot;mysql&quot;&gt;ssh -i archivo.pem user@ip&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Y con eso ya estariamos dentro.
Para enviar archivos al servido directamente con ssh hacemos:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-mysql&quot; data-lang=&quot;mysql&quot;&gt;scp -i archivo.pem files user@ip:/home/user&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Los dos puntos para especificar la ruta. Si hacemos a /root nos va a dar error de permiso, tenerlo en cuenta a la hora de iniciar sesion ssh.&lt;/p&gt;

&lt;h2 id=&quot;crear-usuarios-mysql&quot;&gt;Crear usuarios mysql&lt;/h2&gt;
&lt;p&gt;Para hostear yo mismo la página necesitaba configurar la base de datos.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Crear usuarios&lt;/li&gt;
&lt;/ul&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-mysql&quot; data-lang=&quot;mysql&quot;&gt;CREATE USER 'user'@'localhost' IDENTIFIED BY 'password'&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;ul&gt;
  &lt;li&gt;Darle todos los permisos a ese usuario&lt;/li&gt;
&lt;/ul&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-mysql&quot; data-lang=&quot;mysql&quot;&gt;GRANT ALL PRIVILEGES ON * . * to 'user'@'localhost'&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Tener en cuenta poner localhost y no poner el nombre de la maquina. A mi me dio problemas por ello.&lt;/p&gt;

&lt;h2 id=&quot;proxy-inverso-con-nginx&quot;&gt;Proxy inverso con NGINX&lt;/h2&gt;
&lt;p&gt;Generar la pagina me daba error. Si configuraba apache2 en el servidor y lo levantaba, me accedía siendo yo el cliente. Una mala configuración de los puertos en Azure quedaba descartado. Lo unico que me aparecia era SSL internal error y dentro del servidor me daba errores muy complejos. Con un poco de paciencia configure un proxy inverso con ngix.
La configuración esta en un archivo dentro de /etc/nginx/conf.d.
Puede haber un default.conf, en mi caso no lo había. No voy a explicar el funcionamiento de este archivo porque me tiraría buen rato explicando codigo que basicamente está en la documentación propia de nginx.
&lt;img src=&quot;/assets/screenshots/29_03_2021_1.png&quot; alt=&quot;imagen&quot; /&gt;
Lo unico que hice es transladar el trafico de mi localhost:8080 que es donde esta corriendo mi servicio al localhost:80 cada vez que se accede a la web con la ip. Podemos configurar dominios y diferentes páginas. Yo para checkear que todo funcionase puese la ip. 
PRO-TIP: Para comprobar que el archivo .conf esté bien escrito, en cosola ponemos nginx -t. Por pantalla nos debería de salir “Succesfull”
&lt;img src=&quot;/assets/screenshots/29_03_2021_2.png&quot; alt=&quot;imagen&quot; /&gt;&lt;/p&gt;</content><author><name></name></author><category term="Servidores" /><category term="ssh mysql nginx" /><summary type="html">Escribiré un poco de todo por que no tengo ganas de mirar lxc. Estos días estuve probando a hostear mi propio servidor para writefreely y no tener que pagar la suscripción. Estuve haciendo pruebas en una maquina virtual en Azure y creo que sería interesante escribir sobre como voy en ello.</summary></entry><entry><title type="html">LXC #2</title><link href="http://localhost:4000/lxc/2021/03/26/lxc2.html" rel="alternate" type="text/html" title="LXC #2" /><published>2021-03-26T00:00:00+01:00</published><updated>2021-03-26T00:00:00+01:00</updated><id>http://localhost:4000/lxc/2021/03/26/lxc2</id><content type="html" xml:base="http://localhost:4000/lxc/2021/03/26/lxc2.html">&lt;p&gt;&lt;a&gt;&lt;img src=&quot;https://i.ibb.co/4T4Z6hW/containers.png&quot; alt=&quot;containers&quot; border=&quot;0&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Me puse a hacer pruebas y hay que tener cuidado al instalar lxc en linux mint.&lt;/p&gt;

&lt;p&gt;Para empezar &lt;code&gt;lxc remote list&lt;/code&gt; no funciona solo instalando lxc, sino que tienes tambien que instalar lxd. Por algún motivo solo deja descargarlo con snapd, cosa que viene desactivada por defecto.
También sera necesario descargar &lt;code&gt;lxc-utils&lt;/code&gt;. Todo esto para que no nos de problemas después. 
Mejor intentarlo en una maquina virtual que en el host. Manejar paquetes de forma erronea puede dar muchos quebraderos de cabeza.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Crear un contenedor y descargarlo.
Te va a pedir que tipo de distribucion necesitas etc. Ya te lista el nombre de las opciones, nada complicado. En mi caso ubuntu xenial amd64
&lt;code&gt;lxc-create -t download -n machine-name&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;a&gt;&lt;img src=&quot;https://i.ibb.co/MNrXJHt/Screenshot-2021-03-26-16-21-44.png&quot; alt=&quot;Screenshot-2021-03-26-16-21-44&quot; border=&quot;0&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Listar los contenedores activos.
Lo escribimos todo junto.
&lt;code&gt;lxc-ls&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Ejecutar el contenedor en segundo plano.
El -d es para dejarlo como servicio en segundo plano
&lt;code&gt;lxc-start -n machine-name -d&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Ver contenedores activos
&lt;code&gt;lxc-ls --active&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Accedemos al contenedor
&lt;code&gt;lxc-attach machine-name&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Y ya estariamos dentro de nuesto contenedor creado&lt;/p&gt;</content><author><name></name></author><category term="LXC" /><category term="lxc servidores" /><summary type="html"></summary></entry><entry><title type="html">LXC #1</title><link href="http://localhost:4000/lxc/2021/03/24/lxc1.html" rel="alternate" type="text/html" title="LXC #1" /><published>2021-03-24T00:00:00+01:00</published><updated>2021-03-24T00:00:00+01:00</updated><id>http://localhost:4000/lxc/2021/03/24/lxc1</id><content type="html" xml:base="http://localhost:4000/lxc/2021/03/24/lxc1.html">&lt;p&gt;&lt;a&gt;&lt;img src=&quot;https://i.ibb.co/4T4Z6hW/containers.png&quot; alt=&quot;containers&quot; border=&quot;0&quot; /&gt;&lt;/a&gt;
Estoy haciendo pruebas con lxc. Me resultar algo similar a docker aunque tiene sus variaciones. Me da problemas si lo instalo en el host con linuxmint 20.01. tras prueba y error he conseguido ejecutar lxc y lxd sin problemas en una maquina virtual con ubuntu 20.04. 
No me voy a poner a explicar la configuración de los permisos de ejecución de lxc por que solo fui capaz de ejecutarlo en modo root. Si lo consigo y doy con ello escribiré el resultado de como hacerlo.&lt;/p&gt;

&lt;p&gt;Para el ejemplo estoy usando &lt;strong&gt;LXC 4.0&lt;/strong&gt; con lo que hay que tener en cuenta los cambios de sintaxis.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Instalacion
&lt;code&gt;sudo apt-get install lxc&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;Listado de los repositorios
&lt;code&gt;lxc remote list&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;Lanzar contenedor
&lt;code&gt;lxc launch machine-name&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;Para contenedor
&lt;code&gt;lxc stop machine-name&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;Eliminar (Necesita estar parado)
&lt;code&gt;lxc delete machine name&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;Duplicar
&lt;code&gt;lxc copy machine1 machine2&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;Mover y rename
&lt;code&gt;lxc mv machine1&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;Concetar a un contenedor
&lt;code&gt;lxc exec machine-name bash&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name></name></author><category term="LXC" /><category term="lxc servidores" /><summary type="html">Estoy haciendo pruebas con lxc. Me resultar algo similar a docker aunque tiene sus variaciones. Me da problemas si lo instalo en el host con linuxmint 20.01. tras prueba y error he conseguido ejecutar lxc y lxd sin problemas en una maquina virtual con ubuntu 20.04. No me voy a poner a explicar la configuración de los permisos de ejecución de lxc por que solo fui capaz de ejecutarlo en modo root. Si lo consigo y doy con ello escribiré el resultado de como hacerlo.</summary></entry><entry><title type="html">Mi primer post</title><link href="http://localhost:4000/2021/03/19/inicio.html" rel="alternate" type="text/html" title="Mi primer post" /><published>2021-03-19T00:00:00+01:00</published><updated>2021-03-19T00:00:00+01:00</updated><id>http://localhost:4000/2021/03/19/inicio</id><content type="html" xml:base="http://localhost:4000/2021/03/19/inicio.html">&lt;p&gt;No es por nada en especial la verdad. Generalmente todo lo que aprendo y memorizo lo escribo en libretas pequeñas, las cuales uso hasta la ultima hoja.&lt;/p&gt;

&lt;p&gt;Creo que es buena idea organizar todas esas ideas y apuntes para plasmarlos en algún sitio. La verdad, no me importa que nadie lo lea. 
No se como estructurar la información, todavia me lo estoy pensando, pero según la marcha ire improvisando.&lt;/p&gt;

&lt;p&gt;Intentaré hacer el ejercicio mental de publicar cosas periodicamente. No me comprometo a nada, pero la intención está ahí.&lt;/p&gt;</content><author><name></name></author><summary type="html">No es por nada en especial la verdad. Generalmente todo lo que aprendo y memorizo lo escribo en libretas pequeñas, las cuales uso hasta la ultima hoja.</summary></entry></feed>